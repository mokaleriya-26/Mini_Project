{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!doctype html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% trans "FTTT - Market Alerts" %}</title>
  <link rel="stylesheet" href="{% static 'core/style.css' %}?v=2">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
  <!-- ADD THIS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    {% if messages %}
    <div id="message-container">
      {% for message in messages %}
      <div class="alert {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}
  <main>
    {% block content %}
    <header class="new-header-wrapper">
      <div class="nav-inner container" role="navigation" aria-label="Main navigation">
        <div class="brand" aria-hidden="false">
          <div class="logo">T‚ÜíT</div>
          <div>
            <div style="font-size:13px;opacity:0.9">{% trans "From Tweets" %}</div>
            <div style="font-size:12px;opacity:0.6;margin-top:-4px">{% trans "to Trades" %}</div>
          </div>
        </div>
        <nav aria-hidden="false">
         {% if user.is_authenticated %}
          <a href="{% url 'analysis' %}" class="nav-item">{% trans "Analysis" %}</a>
         {% else %}
           <a href="{% url 'signin' %}" class="nav-item">{% trans "Analysis" %}</a>
          {% endif %}
          <a href="#top-companies" class="nav-item">{% trans "Top Companies" %}</a>
          <a href="#flow" class="nav-item">{% trans "How it Works" %}</a>
        </nav>
        <div class="cta">
          <form action="{% url 'set_language' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <select name="language" onchange="this.form.submit()" style="padding:6px;border-radius:6px;">
              <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>
                English
              </option>
              <option value="hi" {% if LANGUAGE_CODE == 'hi' %}selected{% endif %}>
                ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä
              </option>
              <option value="mr" {% if LANGUAGE_CODE == 'mr' %}selected{% endif %}>
                ‡§Æ‡§∞‡§æ‡§†‡•Ä
              </option>
              <option value="ml" {% if LANGUAGE_CODE == 'ml' %}selected{% endif %}>
                ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥ø
              </option>
            </select>
          </form>

            {% if user.is_authenticated %}
               <span style="color:white; margin-right:10px;">Hi, {{ user.first_name|default:user.username }}!</span>
               <a href="{% url 'signout' %}" class="btn btn-primary" aria-label="Sign Out">{% trans "Sign Out" %}</a>
            {% else %}
               <a href="{% url 'signin' %}" class="btn btn-ghost" aria-label="Sign In">{% trans "Sign In" %}</a>
               <a href="{% url 'signup' %}" class="btn btn-primary" aria-label="Sign Up">{% trans "Sign Up" %}</a>
            {% endif %}
        </div>
      </div>
    </header>

    <div class="container" id="top">
      <section class="hero" aria-labelledby="hero-heading">
        <div>
          <div class="eyebrow">{% trans "Real-time ‚Ä¢ AI ‚Ä¢ Sentiment" %}</div>
          <h1 id="hero-heading">
            {% blocktrans %}
            Never Miss a <span class="accent-text">Market-Moving</span><br>Moment Again
            {% endblocktrans %}
          </h1>
          <p class="lead">{% trans "From Tweets to Trades ‚Äî convert social chatter into real-time trading signals and market alerts. Trusted by thousands of active traders and analysts." %}</p>
         
          <div class="small-note">{% trans "User Friendly ‚Ä¢ 5-minute integration" %}</div>
        </div>
        <div class="hero-right card-mock" aria-hidden="false">
          <!-- LEFT ARROW -->
          <button id="prevLive" class="live-arrow">‚óÄ</button>
          <!-- RIGHT ARROW -->
          <button id="nextLive" class="live-arrow">‚ñ∂</button>
          <div class="live-insight" style="padding:20px; position:relative;">
            <h3 id="live-title">{% trans "LIVE INSIGHT" %}</h3>
            <div id="live-price">{% trans "Loading..." %}</div>
            <div class="live-chart-wrapper">
              <canvas id="liveChart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section id="features" class="features" aria-label="Features">
        <div class="feature-card" role="article">
          <div class="feature-icon">‚ö°</div>
          <h3>{% trans "Market Trend Analysis" %}</h3>
          <p>{% trans "Continuously analyze market data to identify emerging trends and highlight sectors showing unusual momentum or investor attention." %}</p>
        </div>
        <div class="feature-card" role="article">
          <div class="feature-icon">ü§ñ</div>
          <h3>{% trans "AI-driven Insights" %}</h3>
          <p>{% trans "Proprietary models filter noise and surface high-confidence trade ideas with sentiment and event scoring." %}</p>
        </div>
        <div class="feature-card" role="article">
          <div class="feature-icon">üì∞</div>
          <h3>{% trans "Sentiment Tracking" %}</h3>
          <p>{% trans "Track sentiment trends across sectors and map social momentum to price movement with clear visualizations." %}</p>
        </div>
      </section>

      <section id="top-companies" class="top-companies" aria-label="Top trending companies">
        <h2 style="margin:6px 0 6px;font-size:20px">{% trans "Top Trending Companies" %}</h2>
        <div style="color:rgba(217,226,236,0.7);margin-bottom:8px">{% trans "Live social and market movement" %}</div>
        <div class="companies-row" aria-hidden="false">
          <div class="company">
            <div style="display:flex;justify-content:space-between;width:100%;align-items:flex-start;gap:12px">
              <div style="display:flex;gap:10px;align-items:center">
                <div class="logo-sm">H</div>
                <div>
                  <div style="font-weight:800">{% trans "HDFC Bank" %}</div>
                  <div style="font-size:12px;color:rgba(255,255,255,0.6)">{% trans "HDFC . Finance" %}</div>
                </div>
              </div>
              <div style="text-align:right">
                <div class="tick" style="font-size:16px">--</div>
                <div class="chg">--</div>
              </div>
            </div>
            <div class="company-info" style="margin-top:8px;font-size:13px;color:rgba(217,226,236,0.65)">{% trans "Data Loading..." %}</div>
          </div>
          <div class="company">
            <div style="display:flex;justify-content:space-between;width:100%;align-items:flex-start;gap:12px">
              <div style="display:flex;gap:12px;align-items:center">
                <div class="logo-sm">R</div>
                <div>
                  <div style="font-weight:800">{% trans "Reliance Ind." %}</div>
                  <div style="font-size:12px;color:rgba(255,255,255,0.6)">{% trans "REL ‚Ä¢ Technology" %}</div>
                </div>
              </div>
              <div style="text-align:right;min-width: 85px;">
                <div class="tick" style="font-size:16px">--</div>
                <div class="chg down">--</div>
              </div>
            </div>
            <div class="company-info" style="margin-top:8px;font-size:13px;color:rgba(217,226,236,0.65)">{% trans "Data Loading..." %}</div>
          </div>
          <div class="company">
            <div style="display:flex;justify-content:space-between;width:100%;align-items:flex-start;gap:12px">
              <div style="display:flex;gap:10px;align-items:center">
                <div class="logo-sm">T</div>
                <div>
                  <div style="font-weight:800">{% trans "TCS" %}</div>
                  <div style="font-size:12px;color:rgba(255,255,255,0.6)">{% trans "TCS . IT Services" %}</div>
                </div>
              </div>
              <div style="text-align:right;min-width:90px;flex-shrink:0">
                <div class="tick" style="font-size:16px">--</div>
                <div class="chg">--</div>
              </div>
            </div>
            <div class="company-info" style="margin-top:8px;font-size:13px;color:rgba(217,226,236,0.65)">{% trans "Data Loading..." %}</div>
          </div>
          <div class="company">
            <div style="display:flex;justify-content:space-between;width:100%;align-items:flex-start;gap:12px">
              <div style="display:flex;gap:10px;align-items:center">
                <div class="logo-sm">I</div>
                <div>
                  <div style="font-weight:800">{% trans "ICICI" %}</div>
                  <div style="font-size:12px;color:rgba(255,255,255,0.6)">{% trans "ICICI . Finance" %}</div>
                </div>
              </div>
              <div style="text-align:right">
                <div class="tick" style="font-size:16px">--</div>
                <div class="chg">--</div>
              </div>
            </div>
            <div class="company-info" style="margin-top:8px;font-size:13px;color:rgba(217,226,236,0.65)">{% trans "Data Loading..." %}</div>
          </div>
        </div>
      </section>

      <section id="flow" class="flow" aria-labelledby="flow-heading">
        <h2 id="flow-heading" style="margin:0 0 12px">{% trans "From Tweets to Trends ‚Äî How it works" %}</h2>
        <div style="color:rgba(217,226,236,0.7);margin-bottom:12px">{% trans "Raw social chatter ‚Üí signal processing ‚Üí trade-ready alerts" %}</div>
        <div class="flow-grid">
          <div style="display:flex;flex-direction:column;gap:12px">
            <div class="flow-step">
              <div class="num">1</div>
              <div>
                <h4>{% trans "Collect" %}</h4>
                <p>{% trans "We ingest tweets, threads, news, Reddit posts and message board chatter in real time across global feeds." %}</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="num">2</div>
              <div>
                <h4>{% trans "Filter & Classify" %}</h4>
                <p>{% trans "Our NLP pipeline removes bots and noise, classifies event types, and tags tickers & topics automatically." %}</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="num">3</div>
              <div>
                <h4>{% trans "Score" %}</h4>
                <p>{% trans "Signals are scored for confidence, volume, and sentiment drift. Only high-impact signals generate alerts." %}</p>
              </div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:12px">
            <div class="flow-step">
              <div class="num">4</div>
              <div>
                <h4>{% trans "Analysis" %}</h4>
                <p>{% trans "Takes the historical data and sentiments in account for furhter analysis." %}</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="num">5</div>
              <div>
                <h4>{% trans "Stock Prediction" %}</h4> 
                <p>{% trans "After thorough analysis, we can predict the stock price movement and suggest trades." %}</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="num">6</div>
              <div>
                <h4>{% trans "Visualizations" %}</h4>
                <p>{% trans "See trend timelines, sentiment heatmaps, ad correlation views to validate ideas before trading." %}</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer>
        <div class="footer-top">
          <div>
            <div style="font-weight:800;font-size:18px">{% trans "Ready to turn chatter into alpha?" %}</div>
            <div style="color:rgba(217,226,236,0.7)">{% trans "Start a free trial ‚Äî get alerts for your watchlist in minutes." %}</div>
          </div>
          <form class="newsletter" role="form" aria-label="Sign up">
            {% csrf_token %}
            <input class="input" type="email" placeholder="Your work email" aria-label="Email address">
            <button class="btn btn-primary">{% trans "Start Free Trial" %}</button>
          </form>
        </div>
        <div class="footer-bottom">
          <div>¬© <strong>{% trans "From Tweets to Trades" %}</strong> ‚Äî 2025</div>
          <div style="display:flex;gap:16px">
            <a href="{% url 'privacy_policy' %}" style="color:rgba(217,226,236,0.6);text-decoration:none">{% trans "Privacy Policy" %}</a>
            <a href="{% url 'terms_of_service' %}" style="color:rgba(217,226,236,0.6);text-decoration:none">{% trans "Terms of Service" %}</a>
          </div>
        </div>
      </footer> 
    </div>
    {% endblock content %}
  </main>
  <script src="{% static 'core/script.js' %}?v=1"></script>
  <script>
  setTimeout(() => {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => alert.remove());
  }, 4000); // Auto disappears after 4 seconds
  </script>
</body>
</html>